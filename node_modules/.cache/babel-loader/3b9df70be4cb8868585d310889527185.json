{"remainingRequest":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/node_modules/babel-loader/lib/index.js!/Users/igor/Source/VueLesson1Minin/vueLessonTest/src/use/login-form.js","dependencies":[{"path":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/src/use/login-form.js","mtime":1667312839070},{"path":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/node_modules/cache-loader/dist/cjs.js","mtime":1667312835010},{"path":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/node_modules/babel-loader/lib/index.js","mtime":1667312834416}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2lnb3IvU291cmNlL1Z1ZUxlc3NvbjFNaW5pbi92dWVMZXNzb25UZXN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICogYXMgeXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZUZpZWxkLCB1c2VGb3JtIH0gZnJvbSAndmVlLXZhbGlkYXRlJzsKaW1wb3J0IHsgY29tcHV0ZWQsIHdhdGNoIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBmdW5jdGlvbiB1c2VMb2dpbkZvcm0oKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogIHZhciBfdXNlRm9ybSA9IHVzZUZvcm0oKSwKICAgICAgaGFuZGxlU3VibWl0ID0gX3VzZUZvcm0uaGFuZGxlU3VibWl0LAogICAgICBpc1N1Ym1pdHRpbmcgPSBfdXNlRm9ybS5pc1N1Ym1pdHRpbmcsCiAgICAgIHN1Ym1pdENvdW50ID0gX3VzZUZvcm0uc3VibWl0Q291bnQ7CgogIHZhciBfdXNlRmllbGQgPSB1c2VGaWVsZCgnZW1haWwnLCB5dXAuc3RyaW5nKCkudHJpbSgpLnJlcXVpcmVkKCfQn9C+0LvQtSDQtdC80LDQuNC7INC+0LHRj9C30LDRgtC10LvRjNC90L4g0LTQu9GPINCy0LLQvtCw0LTQsCcpLmVtYWlsKCfQstGLINCy0LLQtdC70Lgg0L3QtSBlbWFpbCDQvdC1INCy0LDQu9C40LTQvdGL0LknKSksCiAgICAgIGVtYWlsID0gX3VzZUZpZWxkLnZhbHVlLAogICAgICBlRXJyb3IgPSBfdXNlRmllbGQuZXJyb3JNZXNzYWdlLAogICAgICBlQmx1ciA9IF91c2VGaWVsZC5oYW5kbGVCbHVyOwoKICB2YXIgTUlOX0xFTkdUSCA9IDY7CgogIHZhciBfdXNlRmllbGQyID0gdXNlRmllbGQoJ3Bhc3N3b3JkJywgeXVwLnN0cmluZygpLnRyaW0oKS5yZXF1aXJlZCgpLm1pbihNSU5fTEVOR1RILCAiXHUwNDM0XHUwNDNCXHUwNDM4XHUwNDNEXHUwNDMwIFx1MDQzRlx1MDQzMFx1MDQ0MFx1MDQzRVx1MDQzQlx1MDQ0RiBcdTA0M0VcdTA0MzRcdTA0M0JcdTA0MzZcdTA0M0RcdTA0MzAgXHUwNDMxXHUwNDRCXHUwNDQyXHUwNDRDIFx1MDQzRFx1MDQzNSBcdTA0M0NcdTA0MzVcdTA0M0RcdTA0MzVcdTA0MzUgIi5jb25jYXQoTUlOX0xFTkdUSCwgIiBcdTA0NDFcdTA0MzhcdTA0M0NcdTA0MzJcdTA0M0VcdTA0M0JcdTA0M0VcdTA0MzIgXHUwNDMyXHUwNDMyXHUwNDM1XHUwNDM0XHUwNDM1XHUwNDNEXHUwNDNFIikpKSwKICAgICAgcGFzc3dvcmQgPSBfdXNlRmllbGQyLnZhbHVlLAogICAgICBwRXJyb3IgPSBfdXNlRmllbGQyLmVycm9yTWVzc2FnZSwKICAgICAgcEJsdXIgPSBfdXNlRmllbGQyLmhhbmRsZUJsdXI7CgogIHZhciBpc1Rvb01hbnlBdHRlbXBzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN1Ym1pdENvdW50LnZhbHVlID49IDM7CiAgfSk7CiAgd2F0Y2goaXNUb29NYW55QXR0ZW1wcywgZnVuY3Rpb24gKHZhbCkgewogICAgaWYgKHZhbCkgewogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gc3VibWl0Q291bnQudmFsdWUgPSAwOwogICAgICB9LCAxNTAwKTsKICAgIH0KICB9KTsKICB2YXIgb25TdWJtaXQgPSBoYW5kbGVTdWJtaXQoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWx1ZXMpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnYXV0aC9sb2dpbicsIHZhbHVlcyk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Zvcm0nLCB2YWx1ZXMpOwogICAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvJyk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKICByZXR1cm4gewogICAgZW1haWw6IGVtYWlsLAogICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgZUVycm9yOiBlRXJyb3IsCiAgICBwRXJyb3I6IHBFcnJvciwKICAgIGVCbHVyOiBlQmx1ciwKICAgIHBCbHVyOiBwQmx1ciwKICAgIG9uU3VibWl0OiBvblN1Ym1pdCwKICAgIGlzU3VibWl0dGluZzogaXNTdWJtaXR0aW5nLAogICAgaXNUb29NYW55QXR0ZW1wczogaXNUb29NYW55QXR0ZW1wcwogIH07Cn0="},{"version":3,"sources":["/Users/igor/Source/VueLesson1Minin/vueLessonTest/src/use/login-form.js"],"names":["yup","useField","useForm","computed","watch","useStore","useRouter","useLoginForm","store","router","handleSubmit","isSubmitting","submitCount","string","trim","required","email","value","eError","errorMessage","eBlur","handleBlur","MIN_LENGTH","min","password","pError","pBlur","isTooManyAttemps","val","setTimeout","onSubmit","values","dispatch","console","log","push"],"mappings":";;;;AACA,OAAO,KAAKA,GAAZ,MAAqB,KAArB;AACA,SAAQC,QAAR,EAAkBC,OAAlB,QAAgC,cAAhC;AACA,SAAQC,QAAR,EAAkBC,KAAlB,QAA+B,KAA/B;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AAEA,OAAO,SAASC,YAAT,GAAwB;AAC3B,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;;AAF2B,iBAGuBJ,OAAO,EAH9B;AAAA,MAGpBQ,YAHoB,YAGpBA,YAHoB;AAAA,MAGNC,YAHM,YAGNA,YAHM;AAAA,MAGQC,WAHR,YAGQA,WAHR;;AAAA,kBAKoCX,QAAQ,CACnE,OADmE,EAEnED,GAAG,CACEa,MADL,GAEKC,IAFL,GAGKC,QAHL,CAGc,mCAHd,EAIKC,KAJL,CAIW,+BAJX,CAFmE,CAL5C;AAAA,MAKbA,KALa,aAKpBC,KALoB;AAAA,MAKQC,MALR,aAKNC,YALM;AAAA,MAK4BC,KAL5B,aAKgBC,UALhB;;AAc3B,MAAMC,UAAU,GAAG,CAAnB;;AAd2B,mBAgBuCrB,QAAQ,CACtE,UADsE,EAEtED,GAAG,CACEa,MADL,GAEKC,IAFL,GAGKC,QAHL,GAIKQ,GAJL,CAISD,UAJT,0LAI0DA,UAJ1D,kGAFsE,CAhB/C;AAAA,MAgBbE,QAhBa,cAgBpBP,KAhBoB;AAAA,MAgBWQ,MAhBX,cAgBHN,YAhBG;AAAA,MAgB+BO,KAhB/B,cAgBmBL,UAhBnB;;AAyB3B,MAAMM,gBAAgB,GAAGxB,QAAQ,CAAE;AAAA,WAAKS,WAAW,CAACK,KAAZ,IAAqB,CAA1B;AAAA,GAAF,CAAjC;AAEAb,EAAAA,KAAK,CAACuB,gBAAD,EAAmB,UAAAC,GAAG,EAAI;AAC3B,QAAGA,GAAH,EAAQ;AACJC,MAAAA,UAAU,CAAC;AAAA,eAAIjB,WAAW,CAACK,KAAZ,GAAoB,CAAxB;AAAA,OAAD,EAA6B,IAA7B,CAAV;AACH;AACJ,GAJI,CAAL;AAMA,MAAMa,QAAQ,GAAGpB,YAAY;AAAA,uEAAE,iBAAMqB,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACtBvB,KAAK,CAACwB,QAAN,CAAe,YAAf,EAA6BD,MAA7B,CADsB;;AAAA;AAE3BE,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBH,MAApB;AACAtB,cAAAA,MAAM,CAAC0B,IAAP,CAAY,GAAZ;;AAH2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;AAAA,MAA7B;AAMA,SAAO;AACHnB,IAAAA,KAAK,EAALA,KADG;AAEHQ,IAAAA,QAAQ,EAARA,QAFG;AAGHN,IAAAA,MAAM,EAANA,MAHG;AAIHO,IAAAA,MAAM,EAANA,MAJG;AAKHL,IAAAA,KAAK,EAALA,KALG;AAMHM,IAAAA,KAAK,EAALA,KANG;AAOHI,IAAAA,QAAQ,EAARA,QAPG;AAQHnB,IAAAA,YAAY,EAAZA,YARG;AASHgB,IAAAA,gBAAgB,EAAhBA;AATG,GAAP;AAWH","sourcesContent":["\nimport * as yup from 'yup'\nimport {useField, useForm} from 'vee-validate'\nimport {computed, watch } from 'vue'\nimport {useStore} from 'vuex'\nimport {useRouter} from 'vue-router'\n\nexport function useLoginForm() {\n    const store = useStore()\n    const router = useRouter()\n    const {handleSubmit, isSubmitting, submitCount} = useForm()\n\n    const {value: email, errorMessage: eError, handleBlur: eBlur} =useField(\n        'email',\n        yup\n            .string()\n            .trim()\n            .required('Поле емаил обязательно для ввоада')\n            .email('вы ввели не email не валидный')\n    )\n\n    const MIN_LENGTH = 6\n\n    const {value: password, errorMessage: pError, handleBlur: pBlur} =useField(\n        'password',\n        yup\n            .string()\n            .trim()\n            .required()\n            .min(MIN_LENGTH, `длина пароля одлжна быть не менее ${MIN_LENGTH} символов введено`)\n    )\n\n    const isTooManyAttemps = computed( ()=> submitCount.value >= 3)\n\n    watch(isTooManyAttemps, val => {\n        if(val) {\n            setTimeout(()=>submitCount.value = 0 , 1500)\n        }\n    })\n\n    const onSubmit = handleSubmit( async values => {\n     await   store.dispatch('auth/login', values)\n        console.log('Form', values)\n        router.push('/')\n    })\n\n    return {\n        email,\n        password,\n        eError,\n        pError,\n        eBlur,\n        pBlur,\n        onSubmit,\n        isSubmitting,\n        isTooManyAttemps\n    }\n}"]}]}