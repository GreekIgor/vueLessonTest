{"remainingRequest":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/node_modules/babel-loader/lib/index.js!/Users/igor/Source/VueLesson1Minin/vueLessonTest/src/store/modules/auth.module.js","dependencies":[{"path":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/src/store/modules/auth.module.js","mtime":1667316242806},{"path":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/node_modules/cache-loader/dist/cjs.js","mtime":1667312835010},{"path":"/Users/igor/Source/VueLesson1Minin/vueLessonTest/node_modules/babel-loader/lib/index.js","mtime":1667312834416}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2lnb3IvU291cmNlL1Z1ZUxlc3NvbjFNaW5pbi92dWVMZXNzb25UZXN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2lnb3IvU291cmNlL1Z1ZUxlc3NvbjFNaW5pbi92dWVMZXNzb25UZXN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgZXJyb3IgfSBmcm9tICcuLi8uLi91dGlscy9lcnJvcic7CnZhciBUT0tFTl9LRVkgPSAnand0LXRva2VuJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IGZ1bmN0aW9uIHN0YXRlKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRPS0VOX0tFWSkKICAgIH07CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVE9LRU5fS0VZLCB0b2tlbik7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUudG9rZW4gPSBudWxsOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUT0tFTl9LRVkpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCBBUElfS0VZLCBfeWllbGQkYXhpb3MkcG9zdCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CgogICAgICAgICAgICAgICAgdHJ5IHt9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKGUucmVzcG9uc2UuZGF0YS5lcnJvci5tZXNzYWdlKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgQVBJX0tFWSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfS0VZOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnbkluV2l0aFBhc3N3b3JkP2tleT0iLmNvbmNhdChBUElfS0VZKSwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwYXlsb2FkKSwge30sIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3lpZWxkJGF4aW9zJHBvc3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRheGlvcyRwb3N0LmRhdGE7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFRva2VuJywgJ1RFU1QgVE9LRU4nKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChfLCBnZXR0ZXJzKSB7CiAgICAgIHJldHVybiAhIWdldHRlcnMudG9rZW47IC8vINC40YHQv9C+0LvRjNC30YPQtdGCINC00LLQvtC40L3QvtC1INC+0YLRgNC40YbQsNC90LjQtSDRh9GC0L7QsdGLINC/0YDQuNCy0LXRgdGC0Lgg0LogYm9vbGVhbgogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/igor/Source/VueLesson1Minin/vueLessonTest/src/store/modules/auth.module.js"],"names":["axios","error","TOKEN_KEY","namespaced","state","token","localStorage","getItem","mutations","setToken","setItem","logout","removeItem","actions","login","payload","commit","e","console","log","response","data","message","API_KEY","process","env","VUE_APP_KEY","post","returnSecureToken","getters","isAuthenticated","_"],"mappings":";;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,mBAApB;AACA,IAAMC,SAAS,GAAG,WAAlB;AAEA,eAAgB;AACZC,EAAAA,UAAU,EAAE,IADA;AAEZC,EAAAA,KAFY,mBAEJ;AACJ,WAAO;AACHC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqBL,SAArB;AADJ,KAAP;AAGH,GANW;AAOZM,EAAAA,SAAS,EAAE;AACPC,IAAAA,QADO,oBACEL,KADF,EACSC,KADT,EAEP;AACID,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACAC,MAAAA,YAAY,CAACI,OAAb,CAAqBR,SAArB,EAAgCG,KAAhC;AACH,KALM;AAMPM,IAAAA,MANO,kBAMAP,KANA,EAOP;AACIA,MAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;AACAC,MAAAA,YAAY,CAACM,UAAb,CAAwBV,SAAxB;AACH;AAVM,GAPC;AAmBZW,EAAAA,OAAO,EAAE;AACCC,IAAAA,KADD,uBACiBC,OADjB,EACyB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAjBC,gBAAAA,MAAiB,QAAjBA,MAAiB;;AAC1B,oBAAG,CAEF,CAFD,CAEE,OAAOC,CAAP,EACF;AACIC,kBAAAA,OAAO,CAACC,GAAR,CAAYlB,KAAK,CAACgB,CAAC,CAACG,QAAF,CAAWC,IAAX,CAAgBpB,KAAhB,CAAsBqB,OAAvB,CAAjB;AACH;;AACKC,gBAAAA,OAPoB,GAOVC,OAAO,CAACC,GAAR,CAAYC,WAPF;AAAA;AAAA,uBAQN1B,KAAK,CAAC2B,IAAN,qFAAwFJ,OAAxF,mCACdR,OADc;AACNa,kBAAAA,iBAAiB,EAAE;AADb,mBARM;;AAAA;AAAA;AAQrBP,gBAAAA,IARqB,qBAQrBA,IARqB;AAU9BL,gBAAAA,MAAM,CAAC,UAAD,EAAa,YAAb,CAAN;;AAV8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAW7B;AAZI,GAnBG;AAiCZa,EAAAA,OAAO,EAAE;AACLxB,IAAAA,KADK,iBACCD,KADD,EACO;AACR,aAAOA,KAAK,CAACC,KAAb;AACH,KAHI;AAILyB,IAAAA,eAJK,2BAIWC,CAJX,EAIcF,OAJd,EAKL;AACI,aAAO,CAAC,CAACA,OAAO,CAACxB,KAAjB,CADJ,CAC2B;AAC1B;AAPI;AAjCG,CAAhB","sourcesContent":["\nimport axios from 'axios'\nimport {error} from '../../utils/error'\nconst TOKEN_KEY = 'jwt-token'\n\nexport default  {\n    namespaced: true,\n    state() {\n        return {\n            token: localStorage.getItem(TOKEN_KEY)\n        }\n    },\n    mutations: {\n        setToken(state, token)\n        {\n            state.token = token\n            localStorage.setItem(TOKEN_KEY, token)\n        },\n        logout(state)\n        {\n            state.token = null\n            localStorage.removeItem(TOKEN_KEY)\n        }\n    },\n    actions: {\n        async login({commit}, payload){\n            try{\n\n            } catch (e)\n            {\n                console.log(error(e.response.data.error.message))\n            }\n            const API_KEY = process.env.VUE_APP_KEY\n          const {data} =  await axios.post(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${API_KEY}`,\n              {...payload,returnSecureToken: true})\n        commit('setToken', 'TEST TOKEN')\n        }\n    },\n    getters: {\n        token(state){\n            return state.token\n        },\n        isAuthenticated(_, getters)\n        {\n            return !!getters.token // использует двоиное отрицание чтобы привести к boolean\n        }\n    }\n}"]}]}