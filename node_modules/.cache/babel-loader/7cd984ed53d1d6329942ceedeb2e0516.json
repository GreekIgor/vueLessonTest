{"remainingRequest":"C:\\MySource\\VueReactJS\\VueMininTest1\\node_modules\\babel-loader\\lib\\index.js!C:\\MySource\\VueReactJS\\VueMininTest1\\src\\use\\login-form.js","dependencies":[{"path":"C:\\MySource\\VueReactJS\\VueMininTest1\\src\\use\\login-form.js","mtime":1667205800678},{"path":"C:\\MySource\\VueReactJS\\VueMininTest1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\MySource\\VueReactJS\\VueMininTest1\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovTXlTb3VyY2UvVnVlUmVhY3RKUy9WdWVNaW5pblRlc3QxL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICogYXMgeXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZUZpZWxkLCB1c2VGb3JtIH0gZnJvbSAndmVlLXZhbGlkYXRlJzsKaW1wb3J0IHsgY29tcHV0ZWQsIHdhdGNoIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGZ1bmN0aW9uIHVzZUxvZ2luRm9ybSgpIHsKICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwoKICB2YXIgX3VzZUZvcm0gPSB1c2VGb3JtKCksCiAgICAgIGhhbmRsZVN1Ym1pdCA9IF91c2VGb3JtLmhhbmRsZVN1Ym1pdCwKICAgICAgaXNTdWJtaXR0aW5nID0gX3VzZUZvcm0uaXNTdWJtaXR0aW5nLAogICAgICBzdWJtaXRDb3VudCA9IF91c2VGb3JtLnN1Ym1pdENvdW50OwoKICB2YXIgX3VzZUZpZWxkID0gdXNlRmllbGQoJ2VtYWlsJywgeXVwLnN0cmluZygpLnRyaW0oKS5yZXF1aXJlZCgn0J/QvtC70LUg0LXQvNCw0LjQuyDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INC00LvRjyDQstCy0L7QsNC00LAnKS5lbWFpbCgn0LLRiyDQstCy0LXQu9C4INC90LUgZW1haWwg0L3QtSDQstCw0LvQuNC00L3Ri9C5JykpLAogICAgICBlbWFpbCA9IF91c2VGaWVsZC52YWx1ZSwKICAgICAgZUVycm9yID0gX3VzZUZpZWxkLmVycm9yTWVzc2FnZSwKICAgICAgZUJsdXIgPSBfdXNlRmllbGQuaGFuZGxlQmx1cjsKCiAgdmFyIE1JTl9MRU5HVEggPSA2OwoKICB2YXIgX3VzZUZpZWxkMiA9IHVzZUZpZWxkKCdwYXNzd29yZCcsIHl1cC5zdHJpbmcoKS50cmltKCkucmVxdWlyZWQoKS5taW4oTUlOX0xFTkdUSCwgIlx1MDQzNFx1MDQzQlx1MDQzOFx1MDQzRFx1MDQzMCBcdTA0M0ZcdTA0MzBcdTA0NDBcdTA0M0VcdTA0M0JcdTA0NEYgXHUwNDNFXHUwNDM0XHUwNDNCXHUwNDM2XHUwNDNEXHUwNDMwIFx1MDQzMVx1MDQ0Qlx1MDQ0Mlx1MDQ0QyBcdTA0M0RcdTA0MzUgXHUwNDNDXHUwNDM1XHUwNDNEXHUwNDM1XHUwNDM1ICIuY29uY2F0KE1JTl9MRU5HVEgsICIgXHUwNDQxXHUwNDM4XHUwNDNDXHUwNDMyXHUwNDNFXHUwNDNCXHUwNDNFXHUwNDMyIFx1MDQzMlx1MDQzMlx1MDQzNVx1MDQzNFx1MDQzNVx1MDQzRFx1MDQzRSIpKSksCiAgICAgIHBhc3N3b3JkID0gX3VzZUZpZWxkMi52YWx1ZSwKICAgICAgcEVycm9yID0gX3VzZUZpZWxkMi5lcnJvck1lc3NhZ2UsCiAgICAgIHBCbHVyID0gX3VzZUZpZWxkMi5oYW5kbGVCbHVyOwoKICB2YXIgaXNUb29NYW55QXR0ZW1wcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdWJtaXRDb3VudC52YWx1ZSA+PSAzOwogIH0pOwogIHdhdGNoKGlzVG9vTWFueUF0dGVtcHMsIGZ1bmN0aW9uICh2YWwpIHsKICAgIGlmICh2YWwpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHN1Ym1pdENvdW50LnZhbHVlID0gMDsKICAgICAgfSwgMTUwMCk7CiAgICB9CiAgfSk7CiAgdmFyIG9uU3VibWl0ID0gaGFuZGxlU3VibWl0KCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodmFsdWVzKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2F1dGgvbG9naW4nLCB2YWx1ZXMpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3JtJywgdmFsdWVzKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwogIHJldHVybiB7CiAgICBlbWFpbDogZW1haWwsCiAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICBlRXJyb3I6IGVFcnJvciwKICAgIHBFcnJvcjogcEVycm9yLAogICAgZUJsdXI6IGVCbHVyLAogICAgcEJsdXI6IHBCbHVyLAogICAgb25TdWJtaXQ6IG9uU3VibWl0LAogICAgaXNTdWJtaXR0aW5nOiBpc1N1Ym1pdHRpbmcsCiAgICBpc1Rvb01hbnlBdHRlbXBzOiBpc1Rvb01hbnlBdHRlbXBzCiAgfTsKfQ=="},{"version":3,"sources":["C:/MySource/VueReactJS/VueMininTest1/src/use/login-form.js"],"names":["yup","useField","useForm","computed","watch","useStore","useLoginForm","store","handleSubmit","isSubmitting","submitCount","string","trim","required","email","value","eError","errorMessage","eBlur","handleBlur","MIN_LENGTH","min","password","pError","pBlur","isTooManyAttemps","val","setTimeout","onSubmit","values","dispatch","console","log"],"mappings":";;;;AACA,OAAO,KAAKA,GAAZ,MAAqB,KAArB;AACA,SAAQC,QAAR,EAAkBC,OAAlB,QAAgC,cAAhC;AACA,SAAQC,QAAR,EAAkBC,KAAlB,QAA+B,KAA/B;AACA,SAAQC,QAAR,QAAuB,MAAvB;AAEA,OAAO,SAASC,YAAT,GAAwB;AAC3B,MAAMC,KAAK,GAAGF,QAAQ,EAAtB;;AAD2B,iBAEuBH,OAAO,EAF9B;AAAA,MAEpBM,YAFoB,YAEpBA,YAFoB;AAAA,MAENC,YAFM,YAENA,YAFM;AAAA,MAEQC,WAFR,YAEQA,WAFR;;AAAA,kBAIoCT,QAAQ,CACnE,OADmE,EAEnED,GAAG,CACEW,MADL,GAEKC,IAFL,GAGKC,QAHL,CAGc,mCAHd,EAIKC,KAJL,CAIW,+BAJX,CAFmE,CAJ5C;AAAA,MAIbA,KAJa,aAIpBC,KAJoB;AAAA,MAIQC,MAJR,aAINC,YAJM;AAAA,MAI4BC,KAJ5B,aAIgBC,UAJhB;;AAa3B,MAAMC,UAAU,GAAG,CAAnB;;AAb2B,mBAeuCnB,QAAQ,CACtE,UADsE,EAEtED,GAAG,CACEW,MADL,GAEKC,IAFL,GAGKC,QAHL,GAIKQ,GAJL,CAISD,UAJT,0LAI0DA,UAJ1D,kGAFsE,CAf/C;AAAA,MAebE,QAfa,cAepBP,KAfoB;AAAA,MAeWQ,MAfX,cAeHN,YAfG;AAAA,MAe+BO,KAf/B,cAemBL,UAfnB;;AAwB3B,MAAMM,gBAAgB,GAAGtB,QAAQ,CAAE;AAAA,WAAKO,WAAW,CAACK,KAAZ,IAAqB,CAA1B;AAAA,GAAF,CAAjC;AAEAX,EAAAA,KAAK,CAACqB,gBAAD,EAAmB,UAAAC,GAAG,EAAI;AAC3B,QAAGA,GAAH,EAAQ;AACJC,MAAAA,UAAU,CAAC;AAAA,eAAIjB,WAAW,CAACK,KAAZ,GAAoB,CAAxB;AAAA,OAAD,EAA6B,IAA7B,CAAV;AACH;AACJ,GAJI,CAAL;AAMA,MAAMa,QAAQ,GAAGpB,YAAY;AAAA,uEAAE,iBAAMqB,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACtBtB,KAAK,CAACuB,QAAN,CAAe,YAAf,EAA6BD,MAA7B,CADsB;;AAAA;AAE3BE,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBH,MAApB;;AAF2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;AAAA,MAA7B;AAKA,SAAO;AACHf,IAAAA,KAAK,EAALA,KADG;AAEHQ,IAAAA,QAAQ,EAARA,QAFG;AAGHN,IAAAA,MAAM,EAANA,MAHG;AAIHO,IAAAA,MAAM,EAANA,MAJG;AAKHL,IAAAA,KAAK,EAALA,KALG;AAMHM,IAAAA,KAAK,EAALA,KANG;AAOHI,IAAAA,QAAQ,EAARA,QAPG;AAQHnB,IAAAA,YAAY,EAAZA,YARG;AASHgB,IAAAA,gBAAgB,EAAhBA;AATG,GAAP;AAWH","sourcesContent":["\r\nimport * as yup from 'yup'\r\nimport {useField, useForm} from 'vee-validate'\r\nimport {computed, watch } from 'vue'\r\nimport {useStore} from 'vuex'\r\n\r\nexport function useLoginForm() {\r\n    const store = useStore()\r\n    const {handleSubmit, isSubmitting, submitCount} = useForm()\r\n\r\n    const {value: email, errorMessage: eError, handleBlur: eBlur} =useField(\r\n        'email',\r\n        yup\r\n            .string()\r\n            .trim()\r\n            .required('Поле емаил обязательно для ввоада')\r\n            .email('вы ввели не email не валидный')\r\n    )\r\n\r\n    const MIN_LENGTH = 6\r\n\r\n    const {value: password, errorMessage: pError, handleBlur: pBlur} =useField(\r\n        'password',\r\n        yup\r\n            .string()\r\n            .trim()\r\n            .required()\r\n            .min(MIN_LENGTH, `длина пароля одлжна быть не менее ${MIN_LENGTH} символов введено`)\r\n    )\r\n\r\n    const isTooManyAttemps = computed( ()=> submitCount.value >= 3)\r\n\r\n    watch(isTooManyAttemps, val => {\r\n        if(val) {\r\n            setTimeout(()=>submitCount.value = 0 , 1500)\r\n        }\r\n    })\r\n\r\n    const onSubmit = handleSubmit( async values => {\r\n     await   store.dispatch('auth/login', values)\r\n        console.log('Form', values)\r\n    })\r\n\r\n    return {\r\n        email,\r\n        password,\r\n        eError,\r\n        pError,\r\n        eBlur,\r\n        pBlur,\r\n        onSubmit,\r\n        isSubmitting,\r\n        isTooManyAttemps\r\n    }\r\n}"]}]}